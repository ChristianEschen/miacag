The flag 'temp' used in rule train_model is only valid for outputs, not inputs.
Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 2
Rules claiming more threads will be scaled down.
Job stats:
job            count    min threads    max threads
-----------  -------  -------------  -------------
all                1              1              1
copy_config        1              1              1
copy_db            1              1              1
train_model        1              1              1
total              4              1              1


[Mon Sep 20 12:11:45 2021]
rule copy_db:
    input: /home/gandalf/MIA/data/angio/databaseAngio.db
    output: /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test, /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/DBInput.db, /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/DBInput_val.db, /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/DBInput_test.db
    jobid: 1
    resources: tmpdir=/tmp


[Mon Sep 20 12:11:45 2021]
rule copy_config:
    input: ../../configs/classification/_3D/classification_config_angio.yaml
    output: runs/6761e386-b86a-4488-9c9f-d2644b30d27f.yaml
    jobid: 2
    resources: tmpdir=/tmp

[Mon Sep 20 12:11:45 2021]
Finished job 2.
1 of 4 steps (25%) done
[Mon Sep 20 12:11:45 2021]
Finished job 1.
2 of 4 steps (50%) done

[Mon Sep 20 12:11:45 2021]
rule train_model:
    input: /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/DBInput.db, /home/gandalf/MIA/data/angio/sample_data, runs/6761e386-b86a-4488-9c9f-d2644b30d27f.yaml, /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test
    output: /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/model.pt
    jobid: 3
    resources: tmpdir=/tmp

[Mon Sep 20 12:11:45 2021]
Error in rule train_model:
    jobid: 3
    output: /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/model.pt
    shell:
        
       cat "SELECT * FROM DICOM_TABLE" "SELECT * FROM DICOM_TABLE"'
       ; python -m torch.distributed.launch \
       --nproc_per_node 1 \
       --nnodes 1 \
       --node_rank 0 \
       --master_addr 127.0.1.1 \
       --master_port 1231 \
       ../../trainer.py \
       --config runs/6761e386-b86a-4488-9c9f-d2644b30d27f.yaml \
       --DataBasePath /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/DBInput.db \
       --DataSetPath /home/gandalf/MIA/data/angio/sample_data \
       --output_directory /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test \
       --query SELECT * FROM DICOM_TABLE \
       --cpu True \
       --num_workers 2 \
       ; touch /home/gandalf/angiography_data/runs/Sep20_12-11-45_gandalf-MS-7845test/model.pt
       
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /home/gandalf/MIA/scripts/angiography_classifier/.snakemake/log/2021-09-20T121144.922364.snakemake.log
