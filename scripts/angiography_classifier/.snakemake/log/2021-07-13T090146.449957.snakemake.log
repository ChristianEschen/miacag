Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 2
Rules claiming more threads will be scaled down.
Job stats:
job            count    min threads    max threads
-----------  -------  -------------  -------------
all                1              1              1
preprocess         1              1              1
train_model        1              1              1
total              3              1              1


[Tue Jul 13 09:01:46 2021]
rule preprocess:
    input: /home/gandalf/MIA/data/angio/pre_train.csv, /home/gandalf/MIA/data/angio/pre_val.csv, /home/gandalf/MIA/data/angio
    output: /home/gandalf/MIA/data/angio/train.csv, /home/gandalf/MIA/data/angio/val.csv, /home/gandalf/MIA/data/angio/minc_file_path
    jobid: 1
    resources: tmpdir=/tmp

[Tue Jul 13 09:01:49 2021]
Finished job 1.
1 of 3 steps (33%) done

[Tue Jul 13 09:01:49 2021]
rule train_model:
    input: /home/gandalf/MIA/data/angio/minc_file_path, /home/gandalf/MIA/data/angio/train.csv, /home/gandalf/MIA/data/angio/minc_file_path, /home/gandalf/MIA/data/angio/val.csv
    output: logfile.log
    jobid: 2
    resources: tmpdir=/tmp

[Tue Jul 13 09:01:52 2021]
Error in rule train_model:
    jobid: 2
    output: logfile.log
    shell:
        
       python -m torch.distributed.launch \
       --nproc_per_node 1 \
       --nnodes 1 \
       --node_rank 0 \
       --master_addr 192.168.8.116 \
       --master_port 1234 \
       ../../trainer.py \
       --config /home/gandalf/MIA/configs/classification/_3D/classification_config_test_nifty_angio.yaml \
       --TraindataRoot /home/gandalf/MIA/data/angio/minc_file_path \
       --TraindataCSV /home/gandalf/MIA/data/angio/train.csv \
       --ValdataRoot /home/gandalf/MIA/data/angio/minc_file_path \
       --ValdataCSV /home/gandalf/MIA/data/angio/val.csv \
       --cpu False \
       --logfile logfile.log 
       
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /home/gandalf/MIA/scripts/angiography_classifier/.snakemake/log/2021-07-13T090146.449957.snakemake.log
